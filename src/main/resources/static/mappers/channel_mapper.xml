<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.soccer.web.channel.board.dao.ChannelBoardMapper">
	
	<resultMap id="channel" type="com.soccer.web.channel.vo.ChannelVO">
		<result property="channelIdx" column="channel_idx" />
		<result property="userIdx" column="user_idx" />
		<result property="channelName" column="channel_name" />
		<result property="channelImage" column="channel_image" />
		<result property="regionIdx" column="region_idx" />
		<result property="channelMax" column="channel_max" />
	</resultMap>
	
	<select id="channelList" resultMap="channel">
		SELECT * FROM channel
		<if test='searchWord != null or searchWord != ""'>
			<where>
				channel_name LIKE CONCAT('%', #{searchWord}, '%')
			</where>
		</if>
		ORDER BY channel_idx DESC
	</select>
	
	<select id="channelMemeberMax" resultType="integer">
		SELECT channel_max FROM channel
		WHERE channel_idx = #{channelIdx}
	</select>
	
	<insert id="channelInsert" parameterType="com.soccer.web.channel.vo.ChannelVO">
		INSERT INTO channel
		VALUES(
				default,
				#{userIdx},
				#{channelName},
				#{channelImage},
				#{regionIdx},
				#{channelMax},
				)
	</insert>
	
	<update id="channelUpdate" parameterType="com.soccer.web.channel.vo.ChannelVO">
		UPDATE channel
			SET channel_name = #{channelName},
				channel_image = #{channelImage},
				region_idx = #{regionIdx},
				channel_max = #{channelMax}
		WHERE channel_idx = #{channelIdx}
	</update>
</mapper>